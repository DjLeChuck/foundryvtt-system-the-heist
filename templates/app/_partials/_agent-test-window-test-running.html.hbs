<h2>{{localize "HEIST.AgentTestWindow.TitleWithTest" name=agent.name}}</h2>

<div class="grid grid-2col align-center cards-container">
  {{#each jack.cards}}
    <div>
      <img src="{{this.img}}" alt="{{this.name}}" class="card" />
    </div>
  {{/each}}
</div>

<p>{{localize "HEIST.AgentTestWindow.CurrentScore" value=jack.score}}</p>

{{#if isAdmin}}
  <p>{{localize "HEIST.AgentTestWindow.TotalScore" value=jack.totalScore}}</p>

  {{#unless test.isRevealed}}
    <p>
      <button type="button" data-reveal>{{localize "HEIST.AgentTestWindow.Reveal"}}</button>
    </p>
  {{/unless}}
{{/if}}

<h2>{{localize "HEIST.AgentTestWindow.AgentHand"}}</h2>

<div class="grid grid-4col align-center cards-container">
  {{#each agent.cards}}
    <div>
      <img src="{{this.img}}" alt="{{this.name}}" class="card" />
    </div>
  {{/each}}
</div>

<p>{{localize "HEIST.AgentTestWindow.CurrentScore" value=agent.score}}</p>

{{#if agent.isOwner}}
  {{#unless test.isFinished}}
    <p class="grid grid-2col">
      <button type="button" data-draw{{#unless agent.canDraw}} disabled
              title="{{localize "HEIST.AgentTestWindow.NoCardLeft"}}"{{/unless}}>
        {{localize "HEIST.AgentTestWindow.Draw"}}
      </button>
      <button type="button" data-finish>{{localize "HEIST.AgentTestWindow.Finish"}}</button>
    </p>
    {{#if agent.canUseFetish}}
      <p class="grid grid-2col">
        <button type="button" class="grid-span-2" data-fetish>
          {{localize "HEIST.AgentTestWindow.UseFetish"}}
        </button>
      </p>
    {{/if}}
  {{/unless}}
{{/if}}

{{#if test.isFinished}}
  <h2>{{localize "HEIST.AgentTestWindow.Result.Title"}}</h2>

  {{#if test.isRevealed}}
    {{#if test.isSuccessful}}
      <p>{{localize "HEIST.AgentTestWindow.Result.Success"}}</p>

      {{#if test.isBlackjack}}
        <p><strong>{{localize "HEIST.Blackjack.Label"}}</strong></p>
        <p>{{localize "HEIST.Blackjack.Explanations" name=agent.name}}</p>

        {{#if isAdmin}}
          <button type="button" data-blackjack>{{localize "HEIST.Blackjack.Label"}}</button>
        {{/if}}
      {{/if}}
    {{/if}}
    {{#unless test.isSuccessful}}
      <p>{{localize "HEIST.AgentTestWindow.Result.Failure"}}</p>
    {{/unless}}
  {{/if}}
{{/if}}
